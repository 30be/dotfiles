#!/usr/bin/env bash

TEXT=$(pandoc -f commonmark -t plain --wrap=preserve | sed 's/---//g')
echo $TEXT

echo "$TEXT" | fold -w 180 | while read -r CHUNK; do
  ENCODED=$(echo "$CHUNK" | tr ' ' '+')
  echo "$ENCODED"

  URL="https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&tl=en&q=${ENCODED}"
  curl -sL -A "Mozilla/5.0" "$URL"
done | mpv --no-terminal --really-quiet -

# https://evanhahn.com/use-text-to-speech-if-you-cant-proofread-aloud/
